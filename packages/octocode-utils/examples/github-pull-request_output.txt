# github-pull-request.json - LLM-Optimized Format
# Generated by jsonToLLMString function
# This shows how the JSON is transformed for better LLM comprehension
# 
# Key improvements:
# - Arrays as "LIST:" format instead of brackets
# - Semantic labels (Repository, Owner, FilePath, etc.)
# - Boolean values as "yes/no" instead of "true/false"
# - Eliminated JSON syntax noise (quotes, brackets, braces)
# - Zero data loss with enhanced readability
#
# ====================================================================

_comment: ðŸ”„ GitHub Pull Request API Response Example
_description: This file contains a complete GitHub pull request response that tests jsonToLLMString with: (1) Detailed PR metadata with assignees and reviewers, (2) Review objects with approval/change states, (3) File change arrays with addition/deletion counts, (4) Status check arrays from CI/CD systems, (5) Label arrays with color and description metadata, (6) Milestone objects with progress tracking, (7) Complex markdown body content with code examples. This represents the most comprehensive PR data structure with all possible fields populated.
_test_cases: Tests review state handling, file change arrays (changes->LIST), status arrays, label formatting, and complex nested user objects
URL: https://api.github.com/repos/octocode/advanced-toolkit/pulls/142
ID: 1678901234
Node_id: PR_kwDOBuOJA85ji_MK
Html_url: https://github.com/octocode/advanced-toolkit/pull/142
Diff_url: https://github.com/octocode/advanced-toolkit/pull/142.diff
Patch_url: https://github.com/octocode/advanced-toolkit/pull/142.patch
Issue_url: https://api.github.com/repos/octocode/advanced-toolkit/issues/142
Number: 142
State: open
Locked: no
Title: feat: Add advanced OAuth authentication with PKCE support
User:
  Login: alice-codes
  ID: 12345678
  Node_id: MDQ6VXNlcjEyMzQ1Njc4
  Avatar_url: https://avatars.githubusercontent.com/u/12345678?v=4
  Gravatar_id: 
  URL: https://api.github.com/users/alice-codes
  Html_url: https://github.com/alice-codes
  Followers_url: https://api.github.com/users/alice-codes/followers
  Following_url: https://api.github.com/users/alice-codes/following{/other_user}
  Gists_url: https://api.github.com/users/alice-codes/gists{/gist_id}
  Starred_url: https://api.github.com/users/alice-codes/starred{/owner}{/repo}
  Subscriptions_url: https://api.github.com/users/alice-codes/subscriptions
  Organizations_url: https://api.github.com/users/alice-codes/orgs
  Repos_url: https://api.github.com/users/alice-codes/repos
  Events_url: https://api.github.com/users/alice-codes/events{/privacy}
  Received_events_url: https://api.github.com/users/alice-codes/received_events
  Type: User
  Site_admin: no
Body: ## Summary

This PR introduces a comprehensive OAuth authentication system with PKCE (Proof Key for Code Exchange) support for enhanced security in client-side applications.

### Key Features
- âœ… OAuth 2.0 Authorization Code Flow with PKCE
- âœ… Support for multiple providers (GitHub, Google, Microsoft)
- âœ… JWT token management with refresh capabilities
- âœ… Rate limiting and security controls
- âœ… Comprehensive error handling
- âœ… TypeScript support with full type definitions

### Breaking Changes
- `AuthManager` class renamed to `AuthenticationManager`
- Configuration structure updated for provider-specific settings
- Token format changed to include additional security metadata

### Migration Guide
```typescript
// Before
const auth = new AuthManager({
  clientId: 'your-client-id',
  clientSecret: 'your-secret'
});

// After  
const auth = new AuthenticationManager({
  github: {
    enabled: true,
    clientId: 'your-github-client-id',
    clientSecret: 'your-github-secret'
  },
  google: {
    enabled: true,
    clientId: 'your-google-client-id',
    clientSecret: 'your-google-secret'
  }
});
```

### Testing
- Added 89 new test cases covering all authentication flows
- Integration tests for OAuth providers
- Security vulnerability testing
- Performance benchmarks

### Documentation
- Updated README with new authentication examples
- Added comprehensive API documentation
- Created migration guide for existing users

Fixes #134, #127, #95
Closes #142
Created_at: 2023-12-10T14:25:33Z
Updated_at: 2023-12-15T09:45:22Z
Closed_at: none
Merged_at: none
Merge_commit_sha: none
Assignee:
  Login: bob-builds
  ID: 23456789
  Node_id: MDQ6VXNlcjIzNDU2Nzg5
  Avatar_url: https://avatars.githubusercontent.com/u/23456789?v=4
  Type: User
  Site_admin: no
Assignees:
  Item 1:
    Login: bob-builds
    ID: 23456789
    Type: User
  Item 2:
    Login: carol-creates
    ID: 34567890
    Type: User
Requested_reviewers:
  Item 1:
    Login: security-expert
    ID: 45678901
    Type: User
Requested_teams:
  Item 1:
    ID: 567890123
    Node_id: T_kwDOBuOJA8567890123
    Name: security-team
    Slug: security-team
    Description: Application security and authentication experts
    Privacy: closed
    URL: https://api.github.com/teams/567890123
    Html_url: https://github.com/orgs/octocode/teams/security-team
Labels:
  Item 1:
    ID: 678901234
    Node_id: LA_kwDOBuOJA8678901234
    URL: https://api.github.com/repos/octocode/advanced-toolkit/labels/enhancement
    Name: enhancement
    Color: a2eeef
    Default: yes
    Description: New feature or request
  Item 2:
    ID: 789012345
    Node_id: LA_kwDOBuOJA8789012345
    URL: https://api.github.com/repos/octocode/advanced-toolkit/labels/security
    Name: security
    Color: d73a4a
    Default: no
    Description: Security-related changes
  Item 3:
    ID: 890123456
    Node_id: LA_kwDOBuOJA8890123456
    URL: https://api.github.com/repos/octocode/advanced-toolkit/labels/breaking-change
    Name: breaking-change
    Color: f9c23c
    Default: no
    Description: Contains breaking changes
Milestone:
  URL: https://api.github.com/repos/octocode/advanced-toolkit/milestones/5
  Html_url: https://github.com/octocode/advanced-toolkit/milestone/5
  Labels_url: https://api.github.com/repos/octocode/advanced-toolkit/milestones/5/labels
  ID: 901234567
  Node_id: MI_kwDOBuOJA8901234567
  Number: 5
  Title: v4.0.0 - Authentication Overhaul
  Description: Major authentication system redesign with OAuth 2.0, PKCE, and enhanced security features
  Creator:
    Login: alice-codes
    ID: 12345678
    Type: User
  Open_issues: 8
  Closed_issues: 23
  State: open
  Created_at: 2023-11-01T10:00:00Z
  Updated_at: 2023-12-15T09:30:15Z
  Due_on: 2024-01-31T23:59:59Z
  Closed_at: none
Draft: no
Commits_url: https://api.github.com/repos/octocode/advanced-toolkit/pulls/142/commits
Review_comments_url: https://api.github.com/repos/octocode/advanced-toolkit/pulls/142/comments
Review_comment_url: https://api.github.com/repos/octocode/advanced-toolkit/pulls/comments{/number}
Comments_url: https://api.github.com/repos/octocode/advanced-toolkit/issues/142/comments
Statuses_url: https://api.github.com/repos/octocode/advanced-toolkit/statuses/f7e8d9c0b1a2e3f4567890abcdef123456789012
Head:
  Label: octocode:feature/oauth-pkce-auth
  Ref: feature/oauth-pkce-auth
  SHA: f7e8d9c0b1a2e3f4567890abcdef123456789012
  User:
    Login: octocode
    ID: 98765432
    Type: Organization
  Repository:
    ID: 567890123
    Name: advanced-toolkit
    Full_name: octocode/advanced-toolkit
    Private: no
    Description: A comprehensive toolkit for advanced code analysis, transformation, and optimization with AI-powered features
    Language: TypeScript
    Stargazers_count: 4521
    Default_branch: main
Base:
  Label: octocode:main
  Ref: main
  SHA: a1b2c3d4e5f67890abcdef1234567890fedcba98
  User:
    Login: octocode
    ID: 98765432
    Type: Organization
  Repository:
    ID: 567890123
    Name: advanced-toolkit
    Full_name: octocode/advanced-toolkit
_links:
  Self:     Href: https://api.github.com/repos/octocode/advanced-toolkit/pulls/142
  Html:     Href: https://github.com/octocode/advanced-toolkit/pull/142
  Issue:     Href: https://api.github.com/repos/octocode/advanced-toolkit/issues/142
  Comments:     Href: https://api.github.com/repos/octocode/advanced-toolkit/issues/142/comments
  Review_comments:     Href: https://api.github.com/repos/octocode/advanced-toolkit/pulls/142/comments
  Review_comment:     Href: https://api.github.com/repos/octocode/advanced-toolkit/pulls/comments{/number}
  Commits:     Href: https://api.github.com/repos/octocode/advanced-toolkit/pulls/142/commits
  Statuses:     Href: https://api.github.com/repos/octocode/advanced-toolkit/statuses/f7e8d9c0b1a2e3f4567890abcdef123456789012
Author_association: MEMBER
Auto_merge: none
Active_lock_reason: none
Merged: no
Mergeable: yes
Rebaseable: yes
Mergeable_state: clean
Merged_by: none
Comments: 15
Review_comments: 23
Maintainer_can_modify: yes
Commits: 12
Additions: 847
Deletions: 234
Changed_files: 18
Reviews:
  Item 1:
    ID: 1234567890
    Node_id: PRR_kwDOBuOJA81234567890
    User:
      Login: security-expert
      ID: 45678901
      Type: User
    Body: Overall this looks great! The PKCE implementation is solid and follows security best practices. I have a few minor suggestions:

1. Consider adding rate limiting to the token refresh endpoint
2. The PKCE code verifier should be stored securely (perhaps encrypted)
3. Add more comprehensive logging for security events

The test coverage is excellent and the documentation is thorough. LGTM with minor changes! ðŸš€
    State: approved
    Html_url: https://github.com/octocode/advanced-toolkit/pull/142#pullrequestreview-1234567890
    Pull_request_url: https://api.github.com/repos/octocode/advanced-toolkit/pulls/142
    Author_association: COLLABORATOR
    Submitted_at: 2023-12-14T16:30:45Z
    Commit_id: f7e8d9c0b1a2e3f4567890abcdef123456789012
  Item 2:
    ID: 2345678901
    Node_id: PRR_kwDOBuOJA82345678901
    User:
      Login: bob-builds
      ID: 23456789
      Type: User
    Body: The code architecture looks solid and the TypeScript types are comprehensive. A few technical observations:

- The provider abstraction is well designed
- Error handling covers edge cases nicely
- Performance impact should be minimal

However, I noticed a potential memory leak in the token cache. Consider implementing a TTL-based cleanup mechanism.

Requesting changes for the memory management issue.
    State: changes_requested
    Html_url: https://github.com/octocode/advanced-toolkit/pull/142#pullrequestreview-2345678901
    Pull_request_url: https://api.github.com/repos/octocode/advanced-toolkit/pulls/142
    Author_association: MEMBER
    Submitted_at: 2023-12-13T14:20:15Z
    Commit_id: e6d7c8b9a0f1e2d3c4b5a6978901234567890123
Status_checks:
  Item 1:
    Context: ci/github-actions
    State: success
    Description: All tests passed
    Target_url: https://github.com/octocode/advanced-toolkit/actions/runs/7123456789
  Item 2:
    Context: security/snyk
    State: success
    Description: No security vulnerabilities found
    Target_url: https://app.snyk.io/org/octocode/project/567890123
  Item 3:
    Context: code-quality/sonarcloud
    State: pending
    Description: Code quality analysis in progress
    Target_url: https://sonarcloud.io/dashboard?id=octocode_advanced-toolkit
File_changes:
  Item 1:
    Filename: src/auth/authentication.ts
    Status: added
    Additions: 234
    Deletions: 0
    Changes: 234
    Patch: @@ -0,0 +1,234 @@
+import { OAuth2Client } from 'google-auth-library';
+import { GitHubAuthProvider } from './providers/github';
+import { GoogleAuthProvider } from './providers/google';
+import { MicrosoftAuthProvider } from './providers/microsoft';
+import { JWTToken, AuthProvider, UserProfile, AuthConfig } from '../types/auth';
+
+/**
+ * Advanced authentication manager with support for multiple OAuth providers
+ * and JWT token management with refresh capabilities.
+ */
+export class AuthenticationManager {
+  private providers: Map<string, AuthProvider>;
+  private config: AuthConfig;
+  private refreshTokens: Map<string, string>;
+
+  constructor(config: AuthConfig) {
+    this.config = config;
+    this.providers = new Map();
+    this.refreshTokens = new Map();
+    
+    // Initialize supported authentication providers
+    this.initializeProviders();
+  }
  Item 2:
    Filename: src/auth/providers/github.ts
    Status: added
    Additions: 156
    Deletions: 0
    Changes: 156
  Item 3:
    Filename: src/auth/providers/google.ts
    Status: added
    Additions: 142
    Deletions: 0
    Changes: 142
  Item 4:
    Filename: src/types/auth.ts
    Status: added
    Additions: 89
    Deletions: 0
    Changes: 89
  Item 5:
    Filename: src/legacy/auth-manager.ts
    Status: removed
    Additions: 0
    Deletions: 234
    Changes: 234